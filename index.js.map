{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios, { Axios } from 'axios';\n\n\nconst axiosInstance = axios.create({\n  baseURL: 'https://pixabay.com/api/',\n  params: {\n    key: '51662692-15f66b8f148fe09f1ff22625f',\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: 15\n  }\n});\n\n\n\nexport async function getImagesByQuery(query, page){\n  try{\n const response = await axiosInstance.get('', {\n        params: {q: query, page}\n    })\n    return{\n      hits: response.data.hits,\n      totalHits: response.data.totalHits\n    } \n\n} catch(error) {\n  console.error(\"помилка!\", error);\n}\n  }\n \n\n\n","import SimpleLightbox from \"simplelightbox\";\n\nlet lightboxInstance;\n\n// СТВОРЕННЯ РОЗМІТКИ\nexport function createGallery(images) {\n  const galleryContainer = document.querySelector('.gallery');\n  \n  const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, downloads, comments}) => `\n    <a href=\"${largeImageURL}\" class=\"gallery_item\">\n      <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n\n<ul class=\"stats-container\">\n  <li class=\"stat-item\">\n    <span>Likes</span>\n    <span>${likes}</span>\n  </li>\n  <li class=\"stat-item\">\n    <span>Views</span>\n    <span>${views}</span>\n  </li>\n  <li class=\"stat-item\">\n    <span>Comments</span>\n    <span>${comments}</span>\n  </li>\n  <li class=\"stat-item\">\n    <span>Downloads</span>\n    <span>${downloads}</span>\n  </li>\n</ul>\n    </a>\n  `).join('');\n\n  galleryContainer.innerHTML = markup;\n\n  if (!lightboxInstance) {\n    lightboxInstance = new SimpleLightbox('.gallery a');\n  } else {\n    lightboxInstance.refresh();\n  }}\n\n  // ОЧИСТИТИ ГАЛЕРЕЮ\n  export function clearGallery() {\n  const galleryContainer = document.querySelector('.gallery');\n  galleryContainer.innerHTML = '';\n}\n\n// ПОКАЗАТИ ЛОАДЕР\nexport function showLoader(){\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.classList.remove('is-not-active');\n  } else {\n    console.warn('Loader element not found');\n  }\n}\n// ЗХОВАТИ ЛОАДЕР\nexport function hideLoader(){\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.classList.add('is-not-active');\n  } else {\n    console.warn('Loader element not found in hideLoader');\n  }\n}\n\n// ПОКАЗАТИ КНОПКУ \"MORE PAGE\"\nexport function showLoadMoreButton(){\n  const button = document.querySelector('.button-js')\n  button.classList.remove('is-not-active')\n}\n\n// СХОВАТИ КНОПКУ \"MORE PAGE\"\nexport function hideLoadMoreButton(){\n  const button = document.querySelector('.button-js')\n  button.classList.add('is-not-active')\n}\n\n// ДОДАТИ ГАЛЕРЕЮ\n\nexport function createMoreGallery(images){\n\n\n    const galleryContainer = document.querySelector('.gallery');\n  \n  const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, downloads, comments}) => `\n    <a href=\"${largeImageURL}\" class=\"gallery_item\">\n      <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n\n<ul class=\"stats-container\">\n  <li class=\"stat-item\">\n    <span>Likes</span>\n    <span>${likes}</span>\n  </li>\n  <li class=\"stat-item\">\n    <span>Views</span>\n    <span>${views}</span>\n  </li>\n  <li class=\"stat-item\">\n    <span>Comments</span>\n    <span>${comments}</span>\n  </li>\n  <li class=\"stat-item\">\n    <span>Downloads</span>\n    <span>${downloads}</span>\n  </li>\n</ul>\n    </a>\n  `).join('');\n\n  galleryContainer.insertAdjacentHTML('beforeend', markup)\n  \n\n  if (!lightboxInstance) {\n    lightboxInstance = new SimpleLightbox('.gallery a');\n  } else {\n    lightboxInstance.refresh();\n  }}\n\n// export function checkPage (totalHits, per_page) {\n//  let totalPages = Math.ceil(totalHits / per_page)\n//   }\n","// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nimport { getImagesByQuery } from \"./js/pixabay-api\";\nimport { createGallery, hideLoadMoreButton, showLoadMoreButton } from \"./js/render-functions\";\nimport { showLoader } from \"./js/render-functions\";\nimport { hideLoader } from \"./js/render-functions\";\nimport { clearGallery } from \"./js/render-functions\";\nimport { createMoreGallery } from \"./js/render-functions\";\n\n\nconst form = document.querySelector('.form')\nconst searchText = document.querySelector('[name=\"search-text\"]')\nconst buttonLoadMore = document.querySelector('.button-js')\nconst per_page = 15;\n\nlet totalHitsValue = ''\nlet page = 1;\nlet searchTextValue = '';\n\n\n\n\n\nform.addEventListener('submit', (e)=>{\n    e.preventDefault();\n    searchTextValue = searchText.value.trim()\n    \n    console.log(searchText.value)\n if(searchText.value.trim() === ''){\n          iziToast.error({\n                message: 'enter text, please!',\n            })  \n          return\n        }\n    clearGallery()\n    showLoader()\n    getImagesByQuery(searchTextValue, page).then(({hits, totalHits}) => {\n        if (hits.length === 0){\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            }) \n        }\n        createGallery(hits)\n        showLoadMoreButton()\n    })\n    .catch(err =>{\n      iziToast.error({\n        message: 'Please try again later'\n      })\n    })\n    .finally(()=>{\n      hideLoader()\n    })\n})\n\n\n// buttonLoadMore.addEventListener('click', ()=>{\n//   searchTextValue = searchText.value.trim()\n//   getImagesByQuery(searchTextValue, ++page)\n//   .then(images =>{\n//     createGallery(images)\n//   })\n// })\n\nbuttonLoadMore.addEventListener('click', ()=>{\n\n\n\n  \n  hideLoadMoreButton()\n  showLoader()\n  searchTextValue = searchText.value.trim()\n  getImagesByQuery(searchTextValue, ++page)\n  .then(({hits, totalHits}) =>{\n    const totalPages = Math.ceil(totalHits / per_page) \n    if (page >= totalPages){\n    iziToast.show({\n      message: 'Were sorry, but youve reached the end of search results.'\n    })\n    return\n  }\n    createMoreGallery(hits)\n    hideLoader()\n    showLoadMoreButton()\n    \n  })\n})\n\n"],"names":["axiosInstance","axios","getImagesByQuery","query","page","response","error","lightboxInstance","createGallery","images","galleryContainer","markup","webformatURL","largeImageURL","tags","likes","views","downloads","comments","SimpleLightbox","clearGallery","showLoader","loader","hideLoader","showLoadMoreButton","hideLoadMoreButton","createMoreGallery","form","searchText","buttonLoadMore","per_page","searchTextValue","iziToast","hits","totalHits","err","totalPages"],"mappings":"+vBAGA,MAAMA,EAAgBC,EAAM,OAAO,CACjC,QAAS,2BACT,OAAQ,CACN,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,EACX,CACH,CAAC,EAIM,eAAeC,EAAiBC,EAAOC,EAAK,CACjD,GAAG,CACJ,MAAMC,EAAW,MAAML,EAAc,IAAI,GAAI,CACtC,OAAQ,CAAC,EAAGG,EAAO,KAAAC,CAAI,CAC/B,CAAK,EACD,MAAM,CACJ,KAAMC,EAAS,KAAK,KACpB,UAAWA,EAAS,KAAK,SAC1B,CAEL,OAAQC,EAAO,CACb,QAAQ,MAAM,WAAYA,CAAK,CACjC,CACA,CC3BA,IAAIC,EAGG,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAAmB,SAAS,cAAc,UAAU,EAEpDC,EAASF,EAAO,IAAI,CAAC,CAAE,aAAAG,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,UAAAC,EAAW,SAAAC,CAAQ,IAAM;AAAA,eAC1FL,CAAa;AAAA,kBACVD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,YAKhCC,CAAK;AAAA;AAAA;AAAA;AAAA,YAILC,CAAK;AAAA;AAAA;AAAA;AAAA,YAILE,CAAQ;AAAA;AAAA;AAAA;AAAA,YAIRD,CAAS;AAAA;AAAA;AAAA;AAAA,GAIlB,EAAE,KAAK,EAAE,EAEVP,EAAiB,UAAYC,EAExBJ,EAGHA,EAAiB,QAAO,EAFxBA,EAAmB,IAAIY,EAAe,YAAY,CAGnD,CAGM,SAASC,GAAe,CAC/B,MAAMV,EAAmB,SAAS,cAAc,UAAU,EAC1DA,EAAiB,UAAY,EAC/B,CAGO,SAASW,GAAY,CAC1B,MAAMC,EAAS,SAAS,cAAc,SAAS,EAC3CA,EACFA,EAAO,UAAU,OAAO,eAAe,EAEvC,QAAQ,KAAK,0BAA0B,CAE3C,CAEO,SAASC,GAAY,CAC1B,MAAMD,EAAS,SAAS,cAAc,SAAS,EAC3CA,EACFA,EAAO,UAAU,IAAI,eAAe,EAEpC,QAAQ,KAAK,wCAAwC,CAEzD,CAGO,SAASE,GAAoB,CACnB,SAAS,cAAc,YAAY,EAC3C,UAAU,OAAO,eAAe,CACzC,CAGO,SAASC,GAAoB,CACnB,SAAS,cAAc,YAAY,EAC3C,UAAU,IAAI,eAAe,CACtC,CAIO,SAASC,EAAkBjB,EAAO,CAGrC,MAAMC,EAAmB,SAAS,cAAc,UAAU,EAEtDC,EAASF,EAAO,IAAI,CAAC,CAAE,aAAAG,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,UAAAC,EAAW,SAAAC,CAAQ,IAAM;AAAA,eAC1FL,CAAa;AAAA,kBACVD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,YAKhCC,CAAK;AAAA;AAAA;AAAA;AAAA,YAILC,CAAK;AAAA;AAAA;AAAA;AAAA,YAILE,CAAQ;AAAA;AAAA;AAAA;AAAA,YAIRD,CAAS;AAAA;AAAA;AAAA;AAAA,GAIlB,EAAE,KAAK,EAAE,EAEVP,EAAiB,mBAAmB,YAAaC,CAAM,EAGlDJ,EAGHA,EAAiB,QAAO,EAFxBA,EAAmB,IAAIY,EAAe,YAAY,CAGnD,CCnGH,MAAMQ,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAa,SAAS,cAAc,sBAAsB,EAC1DC,EAAiB,SAAS,cAAc,YAAY,EACpDC,EAAW,GAGjB,IAAI1B,EAAO,EACP2B,EAAkB,GAMtBJ,EAAK,iBAAiB,SAAW,GAAI,CAKpC,GAJG,EAAE,eAAc,EAChBI,EAAkBH,EAAW,MAAM,KAAM,EAEzC,QAAQ,IAAIA,EAAW,KAAK,EAC5BA,EAAW,MAAM,KAAI,IAAO,GAAG,CACzBI,EAAS,MAAM,CACT,QAAS,qBACzB,CAAa,EACH,MACD,CACLZ,EAAc,EACdC,EAAY,EACZnB,EAAiB6B,EAAiB3B,CAAI,EAAE,KAAK,CAAC,CAAC,KAAA6B,EAAM,UAAAC,CAAS,IAAM,CAC5DD,EAAK,SAAW,GAChBD,EAAS,MAAM,CACX,QAAS,0EACzB,CAAa,EAELxB,EAAcyB,CAAI,EAClBT,EAAoB,CAC5B,CAAK,EACA,MAAMW,GAAM,CACXH,EAAS,MAAM,CACb,QAAS,wBACjB,CAAO,CACP,CAAK,EACA,QAAQ,IAAI,CACXT,EAAY,CAClB,CAAK,CACL,CAAC,EAWDM,EAAe,iBAAiB,QAAS,IAAI,CAK3CJ,EAAoB,EACpBJ,EAAY,EACZU,EAAkBH,EAAW,MAAM,KAAM,EACzC1B,EAAiB6B,EAAiB,EAAE3B,CAAI,EACvC,KAAK,CAAC,CAAC,KAAA6B,EAAM,UAAAC,CAAS,IAAK,CAC1B,MAAME,EAAa,KAAK,KAAKF,EAAYJ,CAAQ,EACjD,GAAI1B,GAAQgC,EAAW,CACvBJ,EAAS,KAAK,CACZ,QAAS,0DACf,CAAK,EACD,MACD,CACCN,EAAkBO,CAAI,EACtBV,EAAY,EACZC,EAAoB,CAExB,CAAG,CACH,CAAC"}